<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>advance-js</title>
	<link rel="stylesheet" type="text/css" href="css/animation.css">
	<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script type = "text/javascript" rel = "stylesheet" src = "js/swipe.js"></script>
	<script type = "text/javascript" rel = "stylesheet" src = "js/animation.js"></script>
</head>
<body>
	<div class="content">
		<ul class="wrap">
			<li class="itme1">
				<!-- <h1>content1</h1> -->
				<div class="a_background">
					<div class="a_background_top"></div>
					<div class="a_background_middle"></div>
					<div class="a_background_botton"></div>
				</div>
				<div class="sun rotation"></div>
				<div class="cloudArea">
					<div class="cloud cloud1 cloud1Anim"></div>
					<div class="cloud cloud2 cloud2Anim"></div>
				</div>
			</li>
			<li class="itme2">
				<!-- 背景 -->
				<div class="b_background"></div>
				<div class="b_background_pre"></div>
				<!-- 商店 -->
				<div class="shop">
					<div class="door">
						<div class="door_left"></div>
						<div class="door_right"></div>
					</div>
				</div>
				<!-- 灯 -->
				<div class="lamp"></div>
			</li>
			<li class="itme3"><h1>content3</h1></li>
		</ul>
		<div id="boy" class="charactor"></div>
	</div>
</body>
<script>
$(function(){


		var container = $('.content');
		var swipe = Swipe(container);
		var boy = boywalk();
		//--------------测试then函数---------------------------
		// boy.walkTo(2000,0.2).then(function(){
		// 	boy.setColor('#ccc');
		// 	}).then(function(){
		// 		return boy.walkTo(4000,0.4);     //这里为什么要return出去  如果不使用它 则会影响后面的setcolor函数
		// 	}).then(function(){
		// 	boy.setColor('#333');
		// 	}).then(function(){
		// 		return boy.walkTo(18000,0.8);
		// 	}).then(function(){
		// 	boy.setColor('pink');
		// 	});

      function scrollTo(time,proportionX){
      		var distX = container.width()*proportionX;
      		swipe.scrollTo(distX,time);
      }



//开关灯的变化：
     var lamp = {
			elem  : $('.b_background'),
			bright:function(){
				
				this.elem.addClass('lamp_bright');
				console.log(this);

			},
			dark :function(){
				this.elem.removeClass('lamp_bright');
			}
	};


      boy.walkTo(2000,0.2) //行走2S 
      .then(function(){
      	scrollTo(10000,1);  //背景开始运动1个屏幕的距离花时10S
      }).then(function(){
      	return boy.walkTo(10000,0.5); //男孩继续走 距离花时10S
      }).then(function(){
      	 boy.stopwalk();   //暂停走路，
      }).then(function(){
      	return opendoor(); //开门
      }).then(function(){
      		lamp.bright();  //开灯；
      }).then(function(){
      	return boy.toshop(2000);
      });
      


      // opendoor().then(function(){
      // 	lamp.bright();

      // });
    

});  //-------domready结束---------			
</script>
</html>